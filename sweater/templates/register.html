<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles.css')}}" >
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>Register</title>
</head>
<body>
<h1>register page</h1>
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="flashes">
        {% for message in messages %}
            <li>{{message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

<form method="POST">
    <table>
        <tr>
            <td>Логин</td>
            <td><input type="text" name="login"></td>
        </tr>
        <tr>
            <td>Пароль</td>
            <td><input type="password" name="password"></td>
        </tr>
        <tr>
            <td>Повторите пароль</td>
            <td><input type="password" name="password2"></td>

        </tr>
        <tr>
            <td><input id="registerButton" type="submit" value="Register" onclick="sendForm()"></td>
        </tr>
    </table>
    <input id="pass_img" type="hidden" name="pass_img">
<div id="container" class="container"></div>

</form>

<script>
window.onload=function show_imgs(){
    var id_num=1
    var container = document.getElementById("container");
    for(var i =0; i < 20; i++){
        for(var j = 0; j < 20; j++){
            var newdiv = document.createElement("div");
            newdiv.id=String(id_num);
            newdiv.classList.add("box");
            newdiv.setAttribute('onclick', 'checkBlock(this)');
            container.appendChild(newdiv);
            newdiv.style.background = "url(./static/image/"+String(id_num)+".png)";
            id_num++
        }
    }
    document.getElementById("registerButton").disabled=true;
}

mass=[]

function checkBlock(e){
    e.style.background = 'url(./static/image/22.png)';
    if(mass.indexOf(e.id)==-1){
        if(mass.length<3){
        mass.push(e.id);
        }
    }
    else{
    mass.splice(mass.indexOf(e.id),1)
    }
    if(mass.length==3){
       document.getElementById("registerButton").disabled=false;
    }
    else{
    document.getElementById("registerButton").disabled=true;
    }
};

function sendForm(){
    var input = document.getElementById('pass_img');
    input.value=mass;
    input.setAttribute('value', mass.join());
}
</script>

</body>
</html>