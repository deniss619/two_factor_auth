<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="shortcut icon" href="./static/logo.jpg" type="image/jpg">
    <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles.css')}}" >
</head>
<body>
<h1>login page</h1>
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="flashes">
        {% for message in messages %}
            <li>{{message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
<div id='errorMessage'>
</div>
<form method="POST" action="firstFactor" id="form">
    <table>
        <tr>
            <td>Логин</td>
            <td><input type="text" name="login" id="login"></td>
        </tr>
        <tr>
            <td>Пароль</td>
            <td><input type="password" name="password" id="password"></td>
        </tr>
        <tr>
            <td><input type="submit" value="Login"></td>
            <td><a href="{{url_for('register')}}">Register</a> </td>
        </tr>
    </table>
</form>
<button onclick="checkLoginPassword()">Send</button>
<script>
var ajax = new XMLHttpRequest();
ajax.onreadystatechange = function() {
var errorMark=0
    if (ajax.readyState == 4) {
        if (ajax.status == 200) {
            var newdiv = document.createElement("div");
            newdiv.id='containerForLogin';
            newdiv.classList.add("containerForLogin");
            var newimg = document.createElement("img");
            newimg.src="data:image/png;base64,"+ajax.responseText;
            document.body.appendChild(newimg);
            newdiv.style.background = newimg;
            document.body.appendChild(newdiv);
            if(errorMark==1){
                var hidden = document.getElementById("text");
                hidden.classList.add("hidden");
            }
        } else {
        errorMark=1
        var errorMessage = document.getElementById("errorMessage");
        var text = document.createElement("p");
        text.id='text';
        text.innerHTML = 'Ошибка в логине или пароле'
        errorMessage.appendChild(text);
        }

    }
}

function checkLoginPassword(){
    params='login=' + document.getElementById('login').value + '&password=' + document.getElementById('password').value;
    ajax.open('POST', 'firstFactor');
    ajax.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    ajax.send(params);

}
<!--function printMousePos(event) {-->
<!--    console.log("clientX: " + event.offsetX + " - clientY: " + event.offsetY);-->
<!--}-->

<!--container.addEventListener("click", printMousePos);-->
</script>
</body>
</html>